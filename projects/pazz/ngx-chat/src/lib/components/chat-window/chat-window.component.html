<div class="chat-window">
    <div (click)="onClickHeader()" class="chat-contact-header">
        <div class="chat-contact-avatar">
            <img [src]="chatWindowState.contact.avatar"/>
        </div>
        <div class="chat-contact-name">
            {{chatWindowState.contact.name}}
        </div>
        <div class="chat-close" (click)="onClickClose()">
            &times;
        </div>
    </div>
    <div *ngIf="!chatWindowState.isCollapsed" class="chat-content">
        <div class="chat-messages" #messageArea>
            <div *ngFor="let message of chatWindowState.contact.messages"
                 class="chat-message"
                 [ngClass]="{'chat-message--in': message.direction === 'in', 'chat-message--out': message.direction === 'out'}">
                <span [ngxChatLinks]="message.body"></span>
                <div class="chat-message-datetime">
                    <small>{{message.datetime | date:'short'}}</small>
                </div>
            </div>
            <div class="chat-messages-empty" *ngIf="chatWindowState.contact.messages.length === 0">
                {{translations?.noMessages}}
            </div>
            <div class="chat-message chat-message--in" *ngIf="chatWindowState.contact.pendingIn">
                <p>
                    {{translations?.subscriptionRequestMessage}}
                </p>
                <ul class="chat-presence-subscription-actions">
                    <li><a (click)="acceptSubscriptionRequest($event)" href="#">{{translations?.acceptSubscriptionRequest}}</a></li>
                    <li><a (click)="denySubscriptionRequest($event)" href="#">{{translations?.denySubscriptionRequest}}</a></li>
                </ul>
            </div>
        </div>
        <div class="chat-input-container">
            <input class="chat-input"
                   [(ngModel)]="message"
                   (keyup.enter)="onSendMessage()"
                   type="text"
                   placeholder="{{translations?.placeholder}}"/>
        </div>
    </div>
</div>
